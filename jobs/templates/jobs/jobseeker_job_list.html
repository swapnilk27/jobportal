{% extends "base.html" %}

{% block title %}Available Jobs{% endblock %}

{% block navbar_buttons %}
<div class="d-flex gap-2">
    <a class="btn btn-light border-0 shadow-sm"
       href="{% url 'jobseeker_dashboard' %}">
        Dashboard
    </a>

    <a class="btn btn-light border-0 shadow-sm"
       href="{% url 'my_applications' %}">
        My Applications
    </a>
</div>
{% endblock %}


{% block page_header %}
<div class="mb-4">
    <h3 class="font-weight-bold mb-1">Browse Jobs</h3>
    <p class="text-muted mb-3">
        Search and explore available job opportunities
    </p>

    <form method="GET">
        <div class="input-group shadow-sm">
            <input type="text"
                   name="q"
                   value="{{ query }}"
                   class="form-control border-0"
                   placeholder="Search by title, company, or location">

            <div class="input-group-append">
                <button class="btn btn-primary px-4" type="submit">
                    Search
                </button>
            </div>
        </div>
    </form>

    <hr>
</div>
{% endblock %}


{% block content %}

{% if jobseeker_job_list_page_obj %}

<div class="card border-0 shadow-sm">
    <div class="list-group list-group-flush">

        {% for job in jobseeker_job_list_page_obj %}

        <div class="list-group-item py-4">

            <div class="d-flex justify-content-between align-items-center flex-wrap">

                <div>

                    <h5 class="font-weight-bold mb-1">
                        {{ job.job_title }}
                    </h5>

                    <p class="mb-1 text-dark">
                        <strong>{{ job.company_name }}</strong>
                    </p>

                    <small class="text-muted">
                        üìç {{ job.location }} &nbsp; ‚Ä¢ &nbsp;
                        {{ job.created_date|date:"d M Y" }}
                    </small>

                </div>

                <div class="mt-3 mt-md-0">
                    <a href="{% url 'job_detail' job.id %}"
                       class="btn btn-sm btn-primary px-3">
                        View Job
                    </a>
                </div>

            </div>

        </div>

        {% endfor %}

    </div>
</div>

{% else %}

<div class="card border-0 shadow-sm text-center py-5">
    <h5 class="font-weight-bold mb-2">
        No jobs available right now
    </h5>
    <p class="text-muted mb-0">
        Please check back later for new opportunities.
    </p>
</div>

{% endif %}


<!-- Pagination -->
{% if jobseeker_job_list_page_obj %}
<nav>
    <ul class="pagination justify-content-center mt-4">

        {% if jobseeker_job_list_page_obj.has_previous %}
        <li class="page-item">
            {% if query %}
            <a class="page-link shadow-sm"
               href="?q={{ query }}&page={{ jobseeker_job_list_page_obj.previous_page_number }}">
                Previous
            </a>
            {% else %}
            <a class="page-link shadow-sm"
               href="?page={{ jobseeker_job_list_page_obj.previous_page_number }}">
                Previous
            </a>
            {% endif %}
        </li>
        {% endif %}

        <li class="page-item active">
            <span class="page-link">
                Page {{ jobseeker_job_list_page_obj.number }}
                of {{ jobseeker_job_list_page_obj.paginator.num_pages }}
            </span>
        </li>

        {% if jobseeker_job_list_page_obj.has_next %}
        <li class="page-item">
            {% if query %}
            <a class="page-link shadow-sm"
               href="?q={{ query }}&page={{ jobseeker_job_list_page_obj.next_page_number }}">
                Next
            </a>
            {% else %}
            <a class="page-link shadow-sm"
               href="?page={{ jobseeker_job_list_page_obj.next_page_number }}">
                Next
            </a>
            {% endif %}
        </li>
        {% endif %}

    </ul>
</nav>
{% endif %}

{% endblock %}
